---
title: "Cours 1"
output: html_notebook
---

# Description des données de santé

## Import de la base de données

```{r}
BDD<- read.csv2("infert.csv")
BDD <- infert
BDD
```
Base de données présente de base dans R : [lien ici](https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/infert.html) 
```{r}
head(BDD)
```


### Ecart R
- R utilise des packages qui comprennent des fonctions 

```{r}
# chargement d'une library
# base est chargée de base
library(base)
```


```{r}
# installation d'une librairie 
#install.packages("tidyverse")
```


```{r}
# chargement de la librairie
library(tidyverse)
```

- R dispose d'une aide intégrée

```{r}
#aide sur une librairie
?tidyverse
```


```{r}
# aide sur une fonction
?read.csv2
```

- Les fonctions utilises des arguments

- R est un langage de programmation avec différents types d'objets

```{r}
# Ceci est un objet 
a<-1
```

```{r}
#Il peut être appelé par son nom 
a
```
```{r}
#Il peut être modifier par son nom
a<-2 
a
```

```{r}
# Il peut comprendre autre chose qu'une valeur unique 
a<- c("a","b","c")
a
# La fonction c() crée un vecteur
```


```{r}
# Les valeurs d'un vecteur peuvent être accédées par leur indice 
a[1]
a[c(1,3)]

```

```{r}
# BDD est un data frame
(BDD[1,1])
(head(BDD[1,]))
(head(BDD[,1]))
(BDD$education)
```


========================================================


```{r}
# Analyse de la structure de BDD
(str(BDD))


(names(BDD))

```

## Modification des types de variables 

```{r}
# Changement de numérique en facteur
BDD$induced<-as.factor(BDD$induced)
head(BDD$induced)
```


```{r}
# Changement de numérique en facteur avec choix des modalités
BDD$induced<- factor(BDD$induced,  labels =  c("0","1","2 or more"))
head(BDD$induced)

```

```{r}
BDD$spontaneous<- as.factor(BDD$spontaneous)
```

```{r}
# Conversion de facteur en numérique
facteur<- as.factor(c(10,4,10,2,3,4,6,5,7,5,4,10,2))
as.numeric(as.character(facteur))

```


# Retour cours

# Variables quantitatives :
- moyenne
```{r}
mean(BDD$age, na.rm = T)
```

- mediane
```{r}
median(BDD$age, na.rm = T)
```

- min
```{r}
min(BDD$age, na.rm = T)
```

- max 
```{r}
max(BDD$age, na.rm = T)
```

-range 
```{r}
range(BDD$age)
```
###########
### Ecart R ### 

```{r}
# Création de fonction :
rng<- function(x){
  minX<- min(x, na.rm = T)
  maxX<- max(x, na.rm = T)
  return(maxX-minX)
}
rng(BDD$age)  

```
###########

- quartile
```{r}
# premier quantile
(quantile(BDD$age, 0.25))
#Troisième quantile
(quantile(BDD$age, 0.75))
#1er et 3eme quantiles
(quantile(BDD$age, c(0.25, 0.75)))

```
- Interval interquartile 
```{r}
IQR(BDD$age)
```



- Variance, écart type

```{r}
#Variance
(var(BDD$age, na.rm = T))

#écart-type
(sd(BDD$age, na.rm = T))

```


# Retour cours

# Variable Quali : 

- table effectifs
```{r}
table(BDD$education)
```

Astuce 

```{r}
library(pander)
pander(table(BDD$education))
```


- table fréquence 
```{r}
prop.table(table(BDD$education))
```



#### Ecart R ####

# Data Management

## Condition 
<,>,<=,>=,==

```{r}
# Application d'une condition
c(1:7)>5

# Recherche des valeurs supérieurs 
vecteur<-c(1:7)
vecteur[vecteur>5]
```

## Boucle

```{r}
for( i in 1: 10 ){
  
  print(i)
}
  
```

## Condition

```{r}
#fonction appliqué à un vecteur
##ifelse
pander(table(ifelse(BDD$age>25,">25","<25")))


# Condition en générale 
#if, else if et else

ageSup25<- function(x){
  if(x>25){
    return(">25")
  }else if(x==25){
    return("25")
  }  else{
    return("<25")
  }
  
}
ageSup25(45)

```


# Croisement de variable

## Quali Quali

- table effectif
```{r}
table(BDD$case, BDD$education)
```

-table proportion

```{r}
# Proportions en ligne

prop.table(table(BDD$case, BDD$education),1)

# Proportions en colonne
prop.table(table(BDD$case, BDD$education),2)



# Proportions globales
prop.table(table(BDD$case, BDD$education))

```


## Quanti-quali

- Par des conditions 

```{r}
mean(BDD$age[BDD$case==1])
```

- Par la fonction by

```{r}
by(BDD$age, BDD$case, mean)
```

## Quanti Quanti

- correlation
```{r}
cor(BDD$age, BDD$parity)
```
# Données manquantes
Les donnéees manquantes sont noté NA dans R
```{r}
vecteur<- c(1,2,3,NA,5,6)

```

- Calculer moyenne, médiane de vecteur


# TD : 
- Décrire l'ensemble des variables de la base
- Décrire les variables en fonctions du groupe


# A faire pour la semaine prochaine:

Prendre une base de données et décrire les données


 ## Données disponible 
 
 - librarie R
 - [Open data](https://datashare.nida.nih.gov/)

